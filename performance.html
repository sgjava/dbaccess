<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 13 Jun 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>dbaccess - Performance</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Steven P. Goldsmith" />
    <meta name="Date-Creation-yyyymmdd" content="20120110" />
    <meta name="Date-Revision-yyyymmdd" content="20140613" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://www.codeferm.com" id="bannerLeft">
                                                <img src="images/logo.png" alt="DB Access API" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 13 Jun 2014</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Main</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="configure.html" title="Configure">Configure</a>
            </li>
                  <li class="none">
            <strong>Performance</strong>
          </li>
                  <li class="none">
                          <a href="tests.html" title="Tests">Tests</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- Copyright (c) Steven P. Goldsmith. All rights reserved. --><!--  --><!-- Created by Steven P. Goldsmith December 13, 2011 --><!-- sgoldsmith@codeferm.com --><div class="section">
<h2>Performance<a name="Performance"></a></h2>
<p>While using unit tests to glean performance data for the various implementations is not the most scientifically empirical it does provide some interesting insight.</p>
<ul>
<li>You will not notice much difference between the various implementations since most of the latency is caused by the database itself. Examine the profiling results below. You will note that the largest portion of execution time is spent in the actual JDBC driver code.<img src="./images/profile1.png" alt="" /></li>
<li>DbBeanMapper (using DbJdbcConn) bean mapping was four times faster than JdbcTemplate. You should consider this in applications where you are processing larger amounts of beans.</li>
<li>Atomikos JTA transactions are 9 times slower than standard Connection based transactions. You have to weigh the advantages of using thread based JTA which can work across multiple connections (the nature of using a DataSource and closing the Connection after each operation) or using a single Connection. For batch operations the cost is too high to use JTA in my opinion. See the profiling results below.<img src="./images/profile2.png" alt="" /></li></ul>
<ol style="list-style-type: decimal">
<li>Tests using DBCP DataSource. I prime each test to eliminate any lazy loading noise. Spring's JdbcTemplate required the most overhead, but this should not be cause for concern as you will see in the subsequent tests.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.dbcp.DbcpTest</caption>
<tr class="a">
<td align="left">DbQueryRunnerConn</td>
<td align="right">27 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcConn</td>
<td align="right">28 ms</td></tr>
<tr class="a">
<td align="left">DbPersist</td>
<td align="right">31 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcDs</td>
<td align="right">41 ms</td></tr>
<tr class="a">
<td align="left">DbQueryRunnerDs</td>
<td align="right">52 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcTemplate</td>
<td align="right">234 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Average using 1000 iterations with parameter markers.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.dbcp.DbcpTest</caption>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">26 ms</td></tr>
<tr class="b">
<td align="left">DbPersist</td>
<td align="right">27 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcTemplate</td>
<td align="right">30 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcDs</td>
<td align="right">31 ms</td></tr>
<tr class="a">
<td align="left">DbQueryRunnerConn</td>
<td align="right">31 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerDs</td>
<td align="right">33 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Average using 1000 iterations with named parameters.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.dbcp.DbcpTest</caption>
<tr class="a">
<td align="left">DbJdbcTemplate</td>
<td align="right">27 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcConn</td>
<td align="right">27 ms</td></tr>
<tr class="a">
<td align="left">DbQueryRunnerConn</td>
<td align="right">29 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcDs</td>
<td align="right">29 ms</td></tr>
<tr class="a">
<td align="left">DbPersist</td>
<td align="right">31 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerDs</td>
<td align="right">32 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Average using 1000 iterations batch of 3 inserts with parameter markers.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.dbcp.DbcpTest</caption>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">16 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerDs</td>
<td align="right">17 ms</td></tr>
<tr class="a">
<td align="left">DbPersist</td>
<td align="right">17 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerConn</td>
<td align="right">18 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcDs</td>
<td align="right">18 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcTemplate</td>
<td align="right">18 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Average using 1000 iterations batch of 3 inserts with named parameters.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.dbcp.DbcpTest</caption>
<tr class="a">
<td align="left">DbJdbcDs</td>
<td align="right">17 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcTemplate</td>
<td align="right">17 ms</td></tr>
<tr class="a">
<td align="left">DbQueryRunnerDs</td>
<td align="right">17 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerConn</td>
<td align="right">17 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">18 ms</td></tr>
<tr class="b">
<td align="left">DbPersist</td>
<td align="right">18 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Total time using 50000 records mapped to a bean list.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.dbcp.DbcpTest</caption>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">1543 ms</td></tr>
<tr class="b">
<td align="left">DbPersist</td>
<td align="right">1921 ms</td></tr>
<tr class="a">
<td align="left">DbQueryRunnerConn</td>
<td align="right">2053 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerDs</td>
<td align="right">2781 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcDs</td>
<td align="right">3375 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcTemplate</td>
<td align="right">6321 ms</td></tr></table></li>
<li>Tests using AtomikosDataSourceBean DataSource. Average using 1000 iterations of commits.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.transaction.TransactionTest</caption>
<tr class="a">
<td align="left">DbQueryRunnerConn</td>
<td align="right">156 ms</td></tr>
<tr class="b">
<td align="left">DbPersist</td>
<td align="right">160 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcDs</td>
<td align="right">160 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcTemplate</td>
<td align="right">162 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">163 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerDs</td>
<td align="right">163 ms</td></tr></table></li>
<li>Tests using AtomikosDataSourceBean DataSource. Average using 1000 iterations of rollbacks.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.transaction.TransactionTest</caption>
<tr class="a">
<td align="left">DbPersist</td>
<td align="right">76 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerConn</td>
<td align="right">81 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcTemplate</td>
<td align="right">81 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerDs</td>
<td align="right">84 ms</td></tr>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">87 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcDs</td>
<td align="right">88 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Average using 1000 iterations of commits.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.transaction.TransactionTest</caption>
<tr class="a">
<td align="left">DbQueryRunnerConn</td>
<td align="right">17 ms</td></tr>
<tr class="b">
<td align="left">DbJdbcConn</td>
<td align="right">19 ms</td></tr></table></li>
<li>Tests using DBCP DataSource. Average using 1000 iterations of rollbacks.
<table border="1" class="bodyTable"><caption>com.codeferm.dbaccess.transaction.TransactionTest</caption>
<tr class="a">
<td align="left">DbJdbcConn</td>
<td align="right">4 ms</td></tr>
<tr class="b">
<td align="left">DbQueryRunnerConn</td>
<td align="right">5 ms</td></tr></table></li></ol></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2014.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
